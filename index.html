<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Winbond Sample Request Portal</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: #f5f7fa;
            color: #333;
            line-height: 1.6;
        }
        .header {
            background: linear-gradient(135deg, #1e3a5f 0%, #2d5a87 100%);
            padding: 25px 30px;
            color: white;
        }
        .header h1 {
            font-size: 1.8rem;
            margin-bottom: 5px;
        }
        .header p {
            color: #a0c4e8;
            font-size: 0.95rem;
        }
        .container {
            display: flex;
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            gap: 20px;
        }
        .sidebar {
            width: 280px;
            flex-shrink: 0;
        }
        .main {
            flex: 1;
            min-width: 0;
        }
        .form-panel {
            width: 380px;
            flex-shrink: 0;
        }
        .card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }
        .card h2 {
            font-size: 1.1rem;
            margin-bottom: 15px;
            color: #1e3a5f;
            border-bottom: 2px solid #e0e0e0;
            padding-bottom: 10px;
        }
        .card h3 {
            font-size: 1rem;
            margin: 15px 0 10px;
            color: #444;
        }
        label {
            display: block;
            font-size: 0.85rem;
            font-weight: 600;
            margin-bottom: 5px;
            color: #555;
        }
        select, input[type="text"], input[type="email"], input[type="tel"], input[type="number"], textarea {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 0.95rem;
            margin-bottom: 15px;
            transition: border-color 0.2s;
        }
        select:focus, input:focus, textarea:focus {
            outline: none;
            border-color: #2d5a87;
        }
        textarea {
            resize: vertical;
            min-height: 80px;
        }
        .btn {
            background: linear-gradient(135deg, #1e3a5f 0%, #2d5a87 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            font-size: 0.95rem;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(30,58,95,0.3);
        }
        .btn-small {
            padding: 6px 14px;
            font-size: 0.8rem;
        }
        .btn-remove {
            background: #dc3545;
        }
        .btn-full {
            width: 100%;
        }
        .category-section {
            margin-bottom: 25px;
        }
        .category-title {
            font-size: 1.1rem;
            color: #1e3a5f;
            margin-bottom: 12px;
            padding-bottom: 8px;
            border-bottom: 2px solid #e8f4fd;
        }
        .part-card {
            background: #f8f9fa;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 12px;
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            gap: 15px;
            transition: border-color 0.2s, box-shadow 0.2s;
        }
        .part-card:hover {
            border-color: #2d5a87;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .part-card.selected {
            border-color: #28a745;
            background: #f0fff4;
        }
        .part-info {
            flex: 1;
        }
        .part-number {
            font-weight: 700;
            font-size: 1rem;
            color: #1e3a5f;
        }
        .part-desc {
            font-size: 0.85rem;
            color: #666;
            margin-top: 4px;
        }
        .part-specs {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 10px;
        }
        .spec-tag {
            background: #e3f2fd;
            color: #1565c0;
            padding: 3px 10px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 500;
        }
        .part-actions {
            flex-shrink: 0;
        }
        .selected-parts {
            margin-bottom: 20px;
        }
        .selected-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 12px;
            background: #e8f4fd;
            border-radius: 6px;
            margin-bottom: 8px;
            font-size: 0.9rem;
        }
        .selected-count {
            background: #1e3a5f;
            color: white;
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 0.85rem;
            display: inline-block;
            margin-bottom: 15px;
        }
        .divider {
            height: 1px;
            background: #e0e0e0;
            margin: 20px 0;
        }
        .alert {
            padding: 12px 16px;
            border-radius: 6px;
            margin-bottom: 15px;
            font-size: 0.9rem;
        }
        .alert-success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .alert-error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .alert-info {
            background: #e8f4fd;
            color: #1e3a5f;
            border: 1px solid #b8daff;
        }
        .hidden {
            display: none;
        }
        @media (max-width: 1200px) {
            .container {
                flex-direction: column;
            }
            .sidebar, .form-panel {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>Winbond Sample Request Portal</h1>
        <p>Internal Tool for Sales & FAE Teams - Select Parts and Submit Sample Requests</p>
    </div>

    <div class="container">
        <div class="sidebar">
            <div class="card">
                <h2>Part Selector</h2>

                <label for="categoryFilter">Product Category</label>
                <select id="categoryFilter">
                    <option value="all">All Categories</option>
                    <option value="SLC NAND Flash">SLC NAND Flash</option>
                    <option value="Serial NAND Flash">Serial NAND Flash</option>
                    <option value="NOR Flash">NOR Flash</option>
                    <option value="DRAM">DRAM</option>
                </select>

                <label for="densityFilter">Density</label>
                <select id="densityFilter">
                    <option value="all">All Densities</option>
                </select>

                <label for="interfaceFilter">Interface</label>
                <select id="interfaceFilter">
                    <option value="all">All Interfaces</option>
                </select>

                <label for="tempFilter">Temperature Range</label>
                <select id="tempFilter">
                    <option value="all">All Ranges</option>
                    <option value="commercial">Commercial (-40°C to 85°C)</option>
                    <option value="industrial">Industrial (-40°C to 105°C)</option>
                </select>

                <label for="searchInput">Search Part Number</label>
                <input type="text" id="searchInput" placeholder="e.g., W25N01">

                <div class="divider"></div>
                <div class="selected-count">Selected Parts: <span id="selectedCount">0</span></div>
            </div>
        </div>

        <div class="main">
            <div class="card">
                <h2>Available Parts</h2>
                <div id="partsContainer"></div>
            </div>
        </div>

        <div class="form-panel">
            <div class="card">
                <h2>Sample Request Form</h2>

                <div id="alertContainer"></div>

                <div class="selected-parts">
                    <h3>Selected Parts</h3>
                    <div id="selectedPartsContainer">
                        <div class="alert alert-info">Select parts from the catalog to add to your sample request.</div>
                    </div>
                </div>

                <div class="divider"></div>

                <form id="requestForm">
                    <h3>Request Details</h3>
                    <label for="requesterName">Your Name *</label>
                    <input type="text" id="requesterName" placeholder="John Smith" required>

                    <label for="requesterEmail">Email *</label>
                    <input type="email" id="requesterEmail" placeholder="john.smith@company.com" required>

                    <label for="requesterPhone">Phone</label>
                    <input type="tel" id="requesterPhone" placeholder="+1-555-123-4567">

                    <div class="divider"></div>

                    <h3>Customer Information</h3>
                    <label for="customerName">Customer/Company Name *</label>
                    <input type="text" id="customerName" placeholder="Acme Corporation" required>

                    <label for="customerContact">Customer Contact</label>
                    <input type="text" id="customerContact" placeholder="Jane Doe">

                    <label for="customerLocation">Region</label>
                    <select id="customerLocation">
                        <option>North America</option>
                        <option>Europe</option>
                        <option>Asia Pacific</option>
                        <option>Greater China</option>
                        <option>Japan</option>
                        <option>Korea</option>
                        <option>Other</option>
                    </select>

                    <div class="divider"></div>

                    <h3>Application Details</h3>
                    <label for="applicationType">Target Application *</label>
                    <select id="applicationType" required>
                        <option>Payment Terminal / POS</option>
                        <option>Industrial Automation / Building Controls</option>
                        <option>Networking Equipment (Router/Switch)</option>
                        <option>Satellite Communication / SBD</option>
                        <option>Automotive</option>
                        <option>Consumer Electronics</option>
                        <option>IoT / Smart Home</option>
                        <option>Medical Devices</option>
                        <option>Military / Aerospace</option>
                        <option>Other</option>
                    </select>

                    <label for="currentSolution">Current Solution (if displacing competitor)</label>
                    <textarea id="currentSolution" placeholder="e.g., Currently using MXIC MX29LV640 parallel NOR flash"></textarea>

                    <label for="annualVolume">Estimated Annual Volume</label>
                    <select id="annualVolume">
                        <option>< 10K units</option>
                        <option>10K - 50K units</option>
                        <option>50K - 100K units</option>
                        <option>100K - 500K units</option>
                        <option>500K - 1M units</option>
                        <option>> 1M units</option>
                    </select>

                    <label for="sampleQty">Sample Quantity Requested</label>
                    <input type="number" id="sampleQty" min="1" max="100" value="10">

                    <label for="urgency">Urgency Level</label>
                    <select id="urgency">
                        <option>Standard (2-3 weeks)</option>
                        <option>Expedited (1 week)</option>
                        <option>Critical (ASAP)</option>
                    </select>

                    <label for="notes">Additional Notes</label>
                    <textarea id="notes" placeholder="Any special requirements, technical questions, or context..."></textarea>

                    <div class="divider"></div>

                    <button type="submit" class="btn btn-full">Submit Sample Request</button>
                </form>
            </div>
        </div>
    </div>

    <script>
        // Winbond Part Catalog Data
        const WINBOND_CATALOG = {
            "SLC NAND Flash": [
                {part_number: "W29N01GVSIAA", density: "1Gb", interface: "Parallel", package: "TSOP-48", voltage: "3.3V", temp_range: "-40°C to 85°C", description: "1Gb SLC NAND, x8 bus width, 100K P/E cycles"},
                {part_number: "W29N02GVSIAA", density: "2Gb", interface: "Parallel", package: "TSOP-48", voltage: "3.3V", temp_range: "-40°C to 85°C", description: "2Gb SLC NAND, x8 bus width, 100K P/E cycles"},
                {part_number: "W29N04GVSIAA", density: "4Gb", interface: "Parallel", package: "TSOP-48", voltage: "3.3V", temp_range: "-40°C to 85°C", description: "4Gb SLC NAND, x8 bus width, 100K P/E cycles"},
                {part_number: "W29N08GVSIAA", density: "8Gb", interface: "Parallel", package: "TSOP-48", voltage: "3.3V", temp_range: "-40°C to 85°C", description: "8Gb SLC NAND, x8 bus width, 100K P/E cycles"},
                {part_number: "W29N01GVSI4A", density: "1Gb", interface: "Parallel", package: "TSOP-48", voltage: "3.3V", temp_range: "-40°C to 105°C", description: "1Gb Industrial SLC NAND, extended temp"},
                {part_number: "W29N02GVSI4A", density: "2Gb", interface: "Parallel", package: "TSOP-48", voltage: "3.3V", temp_range: "-40°C to 105°C", description: "2Gb Industrial SLC NAND, extended temp"},
            ],
            "Serial NAND Flash": [
                {part_number: "W25N512GV", density: "512Mb", interface: "SPI", package: "SOIC-8", voltage: "3.3V", temp_range: "-40°C to 85°C", description: "512Mb Serial NAND, SPI interface, 100K P/E cycles"},
                {part_number: "W25N01GV", density: "1Gb", interface: "SPI", package: "SOIC-8", voltage: "3.3V", temp_range: "-40°C to 85°C", description: "1Gb Serial NAND, SPI interface, 100K P/E cycles"},
                {part_number: "W25N02GV", density: "2Gb", interface: "SPI", package: "SOIC-8", voltage: "3.3V", temp_range: "-40°C to 85°C", description: "2Gb Serial NAND, SPI interface, 100K P/E cycles"},
                {part_number: "W25N04KV", density: "4Gb", interface: "SPI", package: "SOIC-8", voltage: "3.3V", temp_range: "-40°C to 85°C", description: "4Gb Serial NAND, SPI interface, 100K P/E cycles"},
                {part_number: "W25N01GVZEIG", density: "1Gb", interface: "SPI", package: "WSON-8", voltage: "3.3V", temp_range: "-40°C to 85°C", description: "1Gb Serial NAND, compact WSON package"},
                {part_number: "W25N02KVZEIR", density: "2Gb", interface: "SPI", package: "WSON-8", voltage: "3.3V", temp_range: "-40°C to 105°C", description: "2Gb Industrial Serial NAND, extended temp"},
            ],
            "NOR Flash": [
                {part_number: "W25Q512JV", density: "512Mb", interface: "SPI/QPI", package: "SOIC-16", voltage: "3.3V", temp_range: "-40°C to 85°C", description: "512Mb Quad SPI NOR, DTR support, 100K P/E cycles"},
                {part_number: "W25Q256JV", density: "256Mb", interface: "SPI/QPI", package: "SOIC-16", voltage: "3.3V", temp_range: "-40°C to 85°C", description: "256Mb Quad SPI NOR, DTR support"},
                {part_number: "W25Q128JV", density: "128Mb", interface: "SPI/QPI", package: "SOIC-8", voltage: "3.3V", temp_range: "-40°C to 85°C", description: "128Mb Quad SPI NOR, popular general purpose"},
                {part_number: "W25Q64JV", density: "64Mb", interface: "SPI/QPI", package: "SOIC-8", voltage: "3.3V", temp_range: "-40°C to 85°C", description: "64Mb Quad SPI NOR"},
                {part_number: "W25Q32JV", density: "32Mb", interface: "SPI/QPI", package: "SOIC-8", voltage: "3.3V", temp_range: "-40°C to 85°C", description: "32Mb Quad SPI NOR"},
                {part_number: "W25Q128JVSIQ", density: "128Mb", interface: "SPI/QPI", package: "SOIC-8", voltage: "3.3V", temp_range: "-40°C to 105°C", description: "128Mb Industrial NOR, extended temp"},
            ],
            "DRAM": [
                {part_number: "W9425G6KH-5", density: "256Mb", interface: "DDR", package: "FBGA-60", voltage: "2.5V", temp_range: "-40°C to 85°C", description: "256Mb DDR SDRAM, 200MHz"},
                {part_number: "W9751G6KB-25", density: "512Mb", interface: "DDR2", package: "FBGA-84", voltage: "1.8V", temp_range: "-40°C to 85°C", description: "512Mb DDR2 SDRAM, 400MHz"},
                {part_number: "W631GG6KB-12", density: "1Gb", interface: "DDR3", package: "FBGA-96", voltage: "1.5V", temp_range: "-40°C to 85°C", description: "1Gb DDR3 SDRAM, 800MHz"},
                {part_number: "W632GG6NB-12", density: "2Gb", interface: "DDR3", package: "FBGA-96", voltage: "1.35V", temp_range: "-40°C to 85°C", description: "2Gb DDR3L SDRAM, low power"},
            ]
        };

        let selectedParts = [];

        // Initialize filters
        function initFilters() {
            const densities = new Set();
            const interfaces = new Set();

            Object.values(WINBOND_CATALOG).forEach(parts => {
                parts.forEach(part => {
                    densities.add(part.density);
                    interfaces.add(part.interface);
                });
            });

            const densitySelect = document.getElementById('densityFilter');
            [...densities].sort((a, b) => {
                const aVal = parseFloat(a.replace('Gb', '000').replace('Mb', ''));
                const bVal = parseFloat(b.replace('Gb', '000').replace('Mb', ''));
                return aVal - bVal;
            }).forEach(d => {
                densitySelect.innerHTML += `<option value="${d}">${d}</option>`;
            });

            const interfaceSelect = document.getElementById('interfaceFilter');
            [...interfaces].sort().forEach(i => {
                interfaceSelect.innerHTML += `<option value="${i}">${i}</option>`;
            });
        }

        // Render parts
        function renderParts() {
            const container = document.getElementById('partsContainer');
            const categoryFilter = document.getElementById('categoryFilter').value;
            const densityFilter = document.getElementById('densityFilter').value;
            const interfaceFilter = document.getElementById('interfaceFilter').value;
            const tempFilter = document.getElementById('tempFilter').value;
            const searchTerm = document.getElementById('searchInput').value.toUpperCase();

            container.innerHTML = '';

            Object.entries(WINBOND_CATALOG).forEach(([category, parts]) => {
                if (categoryFilter !== 'all' && category !== categoryFilter) return;

                const filteredParts = parts.filter(part => {
                    if (densityFilter !== 'all' && part.density !== densityFilter) return false;
                    if (interfaceFilter !== 'all' && part.interface !== interfaceFilter) return false;
                    if (tempFilter === 'commercial' && part.temp_range.includes('105°C')) return false;
                    if (tempFilter === 'industrial' && !part.temp_range.includes('105°C')) return false;
                    if (searchTerm && !part.part_number.toUpperCase().includes(searchTerm)) return false;
                    return true;
                });

                if (filteredParts.length === 0) return;

                const section = document.createElement('div');
                section.className = 'category-section';
                section.innerHTML = `<div class="category-title">${category}</div>`;

                filteredParts.forEach(part => {
                    const isSelected = selectedParts.some(p => p.part_number === part.part_number);
                    const partCard = document.createElement('div');
                    partCard.className = `part-card ${isSelected ? 'selected' : ''}`;
                    partCard.innerHTML = `
                        <div class="part-info">
                            <div class="part-number">${part.part_number}</div>
                            <div class="part-desc">${part.description}</div>
                            <div class="part-specs">
                                <span class="spec-tag">${part.density}</span>
                                <span class="spec-tag">${part.interface}</span>
                                <span class="spec-tag">${part.package}</span>
                                <span class="spec-tag">${part.temp_range}</span>
                            </div>
                        </div>
                        <div class="part-actions">
                            <button class="btn btn-small ${isSelected ? 'btn-remove' : ''}" onclick="togglePart('${part.part_number}', '${category}')">
                                ${isSelected ? 'Remove' : 'Add'}
                            </button>
                        </div>
                    `;
                    section.appendChild(partCard);
                });

                container.appendChild(section);
            });
        }

        // Toggle part selection
        function togglePart(partNumber, category) {
            const existingIndex = selectedParts.findIndex(p => p.part_number === partNumber);

            if (existingIndex >= 0) {
                selectedParts.splice(existingIndex, 1);
            } else {
                const part = WINBOND_CATALOG[category].find(p => p.part_number === partNumber);
                if (part) {
                    selectedParts.push({...part, category});
                }
            }

            updateSelectedDisplay();
            renderParts();
        }

        // Update selected parts display
        function updateSelectedDisplay() {
            document.getElementById('selectedCount').textContent = selectedParts.length;

            const container = document.getElementById('selectedPartsContainer');
            if (selectedParts.length === 0) {
                container.innerHTML = '<div class="alert alert-info">Select parts from the catalog to add to your sample request.</div>';
            } else {
                container.innerHTML = selectedParts.map((part, idx) => `
                    <div class="selected-item">
                        <span><strong>${idx + 1}.</strong> ${part.part_number} (${part.density})</span>
                        <button class="btn btn-small btn-remove" onclick="togglePart('${part.part_number}', '${part.category}')">×</button>
                    </div>
                `).join('');
            }
        }

        // Show alert
        function showAlert(message, type) {
            const container = document.getElementById('alertContainer');
            container.innerHTML = `<div class="alert alert-${type}">${message}</div>`;
            setTimeout(() => container.innerHTML = '', 5000);
        }

        // Form submission
        document.getElementById('requestForm').addEventListener('submit', function(e) {
            e.preventDefault();

            if (selectedParts.length === 0) {
                showAlert('Please select at least one part for the sample request.', 'error');
                return;
            }

            const requestId = 'SR-' + new Date().toISOString().replace(/[-:T]/g, '').slice(0, 14);

            const request = {
                request_id: requestId,
                timestamp: new Date().toISOString(),
                requester: {
                    name: document.getElementById('requesterName').value,
                    email: document.getElementById('requesterEmail').value,
                    phone: document.getElementById('requesterPhone').value
                },
                customer: {
                    name: document.getElementById('customerName').value,
                    contact: document.getElementById('customerContact').value,
                    location: document.getElementById('customerLocation').value
                },
                application: {
                    type: document.getElementById('applicationType').value,
                    current_solution: document.getElementById('currentSolution').value,
                    annual_volume: document.getElementById('annualVolume').value
                },
                parts: selectedParts,
                sample_qty: document.getElementById('sampleQty').value,
                urgency: document.getElementById('urgency').value,
                notes: document.getElementById('notes').value
            };

            // Store in localStorage
            const requests = JSON.parse(localStorage.getItem('winbond_requests') || '[]');
            requests.push(request);
            localStorage.setItem('winbond_requests', JSON.stringify(requests));

            // Show success and generate mailto link
            const partsText = selectedParts.map(p => p.part_number).join(', ');
            const emailBody = `Sample Request ID: ${requestId}%0D%0A%0D%0AParts: ${partsText}%0D%0AQuantity: ${request.sample_qty}%0D%0A%0D%0ACustomer: ${request.customer.name}%0D%0AApplication: ${request.application.type}%0D%0AVolume: ${request.application.annual_volume}%0D%0A%0D%0ANotes: ${request.notes}`;

            showAlert(`Request submitted! ID: <strong>${requestId}</strong><br><br><a href="mailto:samples@winbond.com?subject=Sample Request ${requestId}&body=${emailBody}" style="color: #155724; text-decoration: underline;">Click here to email this request</a>`, 'success');

            // Reset form
            selectedParts = [];
            updateSelectedDisplay();
            renderParts();
            this.reset();
            document.getElementById('sampleQty').value = 10;
        });

        // Event listeners for filters
        ['categoryFilter', 'densityFilter', 'interfaceFilter', 'tempFilter', 'searchInput'].forEach(id => {
            document.getElementById(id).addEventListener('change', renderParts);
            document.getElementById(id).addEventListener('input', renderParts);
        });

        // Initialize
        initFilters();
        renderParts();
        updateSelectedDisplay();
    </script>
</body>
</html>
